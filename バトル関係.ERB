
@BATTLE_POKEMON_WILD_FRONT(ポケモンCSV番号)
#DIM P_ID
#DIM P_ID2
#DIM 戦闘結果

CALL SET_POKEMON_ENEMY_WILD(ポケモンCSV番号)
P_ID2 = RESULT

PRINTFORML
PRINTFORML 野生の{CALLNAME:P_ID2}が現れた！！
PRINTFORMW

FOR LOCAL, 0,CHARANUM
    IF TALENT:LOCAL:手持ち順番 == 1
        P_ID == LOCAL
    ENDIF
NEXT

PRINTFORML
PRINTFORML いけ！{CALLNAME:P_ID}！！
PRINTFORMW

CALL BATTLE_POKEMON_WILD_COMMAND(P_ID,P_ID2)
戦闘結果 = RESULT
IF 戦闘結果 == 9999
   ;強制終了
   RETURN
ENDIF 

@BATTLE_POKEMON_WILD_COMMAND(P_ID, P_ID2)
#DIM P_ID
#DIM P_ID2
#DIM 逃走成功率
#DIM 逃走回数

$SHOW_LOOP
PRINTFORML
DRAWLINE
PRINTFORML
;-----------------------------------------
PRINTFORML
PRINTFORM {CALLNAME:P_ID2}
PRINTFORM LV.{BASE:P_ID2:ポケモンLV}

IF TALENT:P_ID2:ポケモン性別 == 1
    PRINTFORML ♂
ELSEIF TALENT:P_ID2:ポケモン性別 == 2
    PRINTFORML ♀
ELSE
    PRINTFORML
ENDIF

PRINTFORML 体力：{MAXBASE:P_ID2:体力} 
PRINTFORML

;-----------------------------------------
PRINTFORML
PRINTFORM {CALLNAME:P_ID}
PRINTFORM LV.{BASE:P_ID:ポケモンLV}

IF TALENT:P_ID:ポケモン性別 == 1
    PRINTFORML ♂
ELSEIF TALENT:P_ID:ポケモン性別 == 2
    PRINTFORML ♀
ELSE
    PRINTFORML
ENDIF

PRINTFORML 体力：{MAXBASE:P_ID:体力} 
PRINTFORML
;-------------------------------------
PRINTFORML
DRAWLINE
PRINTFORML

PRINTBUTTON "[7777] たたかう", 7777
PRINTBUTTON "[8888] ポケモン", 8888
PRINTBUTTON "[9999] 逃げる", 9999

$INPUT_LOOP
INPUT

入力結果 = RESULT

IF 入力結果 == 9999
    逃走回数 ++
    PRINTFORML ・・・
    逃走成功率 = ((MAXBASE:P_ID:素早さ * 128 / MAXBASE:P_ID2:素早さ) + (30 * 逃走回数))*100 / 256
    IF RAND(101) =< 逃走成功率
         PRINTFORML 逃げ切れた！！
         RETURN 9999
    ELSE
        PRINTFORML ダメだ、追いつかれた！！
        
    ENDIF
    PRINTFORML 
ELSEIF 入力結果 == 8888

ELSEIF 入力結果 == 7777

ELSE
    GOTO INPUT_LOOP
ENDIF




@SET_POKEMON_ENEMY_WILD(ポケモンCSV番号)
#DIM ポケモンCSV番号
#DIM P_ID2

ADDCHARA ポケモンCSV番号
P_ID2 = CHARANUM - 1

IF TALENT:P_ID2:ポケモン特殊性別

ELSE
        性別偏差 = RAND(1001)
        IF 性別偏差 <= TALENT:P_ID2:性別割合
            TALENT:P_ID2:ポケモン性別 = 1
        ELSE
            TALENT:P_ID2:ポケモン性別 = 2
        ENDIF
	;TALENT:P_ID2:ポケモン性別 == RAND(1, 3)    
ENDIF

BASE:P_ID2:個体値H == RAND(0, 32)
BASE:P_ID2:個体値A == RAND(0, 32)
BASE:P_ID2:個体値B == RAND(0, 32)
BASE:P_ID2:個体値C == RAND(0, 32)
BASE:P_ID2:個体値D == RAND(0, 32)
BASE:P_ID2:個体値S == RAND(0, 32)

TALENT:P_ID2:ポケモン性格 == RAND(1, 26)

PRINTFORML %NAME:P_ID2%に{BASE:P_ID2:個体値H}を追加して、性格は{TALENT:P_ID2:ポケモン性格}にしたよ
CALL STATUS_POKEMON_Calculator(P_ID2)
TRYCCALLFORM POKEMON_DATA_P{ポケモンCSV番号}(P_ID2)
CATCH
ENDCATCH

RETURN P_ID2

@POKEMON_DATA_P1001(P_ID2 ,登場フラグ)
#DIM P_ID2
#DIM 登場フラグ

IF 登場フラグ == 1
ELSE
    BASE:P_ID2:ポケモンLV = 5
    PRINTFORML %NAME:P_ID2%のレベルを{BASE:P_ID2:ポケモンLV}にしたぞ。
ENDIF


;@SET_POKEMON_ENEMY_TRAINER(トレーナーCSV番号)

































